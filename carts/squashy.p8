pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
function _init()

 -- hello

 --paddle
 padx=52
 pady=122
 padw=24
 padh=4
 
 --ball
 ballx=64
 bally=64
 ballsize=3
 ballxdir=5
 ballydir=-3

 --utility
 delay=0
 score=0
 lives=3
 gameover=false
end 

function losedeadball()
 if bally>128-ballsize then
  if lives>0 then
  -- next life
 		sfx(3)
 		bally=24
 		delay=30
 		lives-=1
 	else
 	 --game over
 	 sfx(4)
 	 gameover = true
  end
 end
end

function movepaddle()
 if btn(0) then
 	padx-=3
 elseif btn(1) then
 	padx+=3
 end
end

function bounceball()
--left
 if ballx<ballsize then
 	ballxdir=-ballxdir
 	sfx(0)
 end

--right
	if ballx>128-ballsize then
	ballxdir=-ballxdir
	sfx(0)
	end
	
--top
 if bally<ballsize then
 ballydir=-ballydir
 sfx(0)
 end
 
end

function bouncepaddle()
 if ballx>=padx and
    ballx<=padx+padw and
    bally>pady-padh then
     sfx(1)
     score+=10
     ballydir=-ballydir
 end
end

function moveball()
 ballx+=ballxdir
 bally+=ballydir
end

function _update()
 if delay<=0 and not gameover then
  movepaddle()
  moveball()
  bounceball()
  bouncepaddle()
  losedeadball()
 elseif delay>0 then
  delay-=1
 elseif gameover then
  if btn(4) then
   _init()
  end
 end
end

function printcenterx(message,y,c)
  print(message,64-(#message*4/2),y,c)
end  

function _draw()
-- clear the screen
	rectfill(0,0,128,128,3)

 if not gameover then
	
  -- draw lives
  for i=1,lives do
   spr(001,90+i*8,4)
  end

  -- draw the score
  print(score,12,6,15)
 
  -- draw the paddle
  rectfill(padx,pady,padx+padw,pady+padh,15)

  if (delay<=0) then
   -- draw the ball
	  circfill(ballx,bally,ballsize,15)
  end
 else
  printcenterx("game over",60,15)
  printcenterx("score "..tostr(score), 68,15)
  printcenterx("press z to continue",76,15)
 end
end 
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000ff0ff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700fffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000fffffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000fffff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000fff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000d00002e05000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000001d05000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00100000250501f05019050130500e0500a0500a05000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000a05006050020500205001050000500005001050010500105001050010500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
