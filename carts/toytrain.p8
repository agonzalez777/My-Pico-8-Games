pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
function _init()
    music(0)
	cls()
	current_direction = -1 -- 1 = counter clockwise and -1 = clockwise
	speed = 1
	switch = 0
	-- Each segment (Sprite #, Start Coordinate X, Start Coordinate Y)
	train={{17,24,16},{18,24,24},{18,24,32},{18,24,40}}
end

function _draw()
	-- Draw Background and Tracks
	map(0,0,0,0,16,16)
	-- Draw Train
	draw_train(train)
	draw_switch()
end

function move_segment(segment)
	
	if ((segment[3] - speed) < 8) then
		segment[3] = 8
		segment[2]-=current_direction*speed
	elseif (segment[3] + speed > 56) then
		 segment[3] = 56
		 segment[2]+=current_direction*speed
	elseif (segment[3] == 8) then
		segment[2]+=current_direction*speed
	elseif (segment[3] == 56) then
		segment[2]-=current_direction*speed
	end

	
	if (segment[2] + speed > 96) then
		segment[2] = 96
		segment[3] -= current_direction*speed
	elseif (segment[2] - speed < 24) then
		segment[2] = 24
		segment[3] += current_direction*speed
	elseif (segment[2] == 96) then
		segment[3] -= current_direction*speed
	elseif (segment[2] == 24) then
		segment[3] += current_direction*speed
	end

end

function move_train()
	for s in all(train) do
		move_segment(s)
	end
end

function draw_switch()
  if (switch == 0) then
	sspr(24,8,16,16,110,32)
  end

end

function draw_train()
 for s in all(train) do 
	spr(s[1],s[2],s[3])
 end
 
end


function _update()
	move_train()
end

__gfx__
000000005995594599455995555555555995594955555555555555553b3b3b3b0000000000000000000000000000000000000000000000000000000000000000
000000005495599594955995499499995949559459994999999999453bb3b3b30000000000000000000000000000000000000000000000000000000000000000
0070070059455495995599459449994959495599549994999949499533b333330000000000000000000000000000000000000000000000000000000000000000
00077000599559955555499555555555599995555949995555999945b3bb3bb30000000000000000000000000000000000000000000000000000000000000000
000770005495594555599995555555555944995554999555555599953333b3330000000000000000000000000000000000000000000000000000000000000000
00700700599559959994949599494999599999995999559999559995b3b333330000000000000000000000000000000000000000000000000000000000000000
000000005945549594999995944999495499949959955994949554953b33b3bb0000000000000000000000000000000000000000000000000000000000000000
00000000599559955555555555555555555555555495594999955995333b3b330000000000000000000000000000000000000000000000000000000000000000
000000007700007777777777b3bffffffffffb3bb3bffffffffffb3bb3bffffffffffb3bb3bffffffffffb3bb3b5555555555b3b000000000000000000000000
0000000076600667766666673b3ffffffffff3b33b3ffffffffff3b33b3ffffffffff3b33b3ffffffffff3b33b355555555553b3000000000000000000000000
000000007666666776666667333ffffffffff333333ffffffffff333333ffffffffff333333ffffffffff333333ffffffffff333000000000000000000000000
000000007666666776666667bb3ffffffffffbb3bb3ffffffffffbb3bb3ffffffffffbb3bb35555555555bb3bb3ffffffffffbb3000000000000000000000000
00000000766a866776666667333ffffffffff333333ffffffffff333333ffffffffff3333335555555555333333ffffffffff333000000000000000000000000
0000000076a8a66776666667333ffffffffff333333ffffffffff333333ffffffffff333333ffffffffff333333ffffffffff333000000000000000000000000
00000000768a4867766666673bbffffffffff3bb3bbffffffffff3bb3bb55555555553bb3bbffffffffff3bb3bbffffffffff3bb000000000000000000000000
000000007777777777777777b33ffffffffffb33b33ffffffffffb33b335555555555b33b33ffffffffffb33b33ffffffffffb33000000000000000000000000
000000000000000000000000b3bffffffffffb3bb3bffffffffffb3bb3bffffffffffb3bb3bffffffffffb3bb3bffffffffffb3b000000000000000000000000
0000000000000000000000003b3ffffffffff3b33b3ffffffffff3b33b3ffffffffff3b33b3ffffffffff3b33b3ffffffffff3b3000000000000000000000000
000000000000000000000000333ffffffffff3333335555555555333333ffffffffff333333ffffffffff333333ffffffffff333000000000000000000000000
000000000000000000000000bb3ffffffffffbb3bb35555555555bb3bb3ffffffffffbb3bb3ffffffffffbb3bb3ffffffffffbb3000000000000000000000000
000000000000000000000000333ffffffffff333333ffffffffff333333ffffffffff333333ffffffffff333333ffffffffff333000000000000000000000000
000000000000000000000000333ffffffffff333333ffffffffff333333ffffffffff333333ffffffffff333333ffffffffff333000000000000000000000000
0000000000000000000000003bb55555555553bb3bbffffffffff3bb3bbffffffffff3bb3bbffffffffff3bb3bbffffffffff3bb000000000000000000000000
000000000000000000000000b335555555555b33b33ffffffffffb33b33ffffffffffb33b33ffffffffffb33b33ffffffffffb33000000000000000000000000
__map__
0707070707070707070707070707070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707070503030303030303030607070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707070107070707070707070107070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707070107070707070707070107070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707070107070707070707070107070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707070107070707070707070107070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707070107070707070707070107070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707070403030303030303030207070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707070707070707070707070707070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707070707070707070707070707070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707070707070707070707070707070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707070707070707070707070707070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707070707070707070707070707070700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707070707070707070707070707070714000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707070707070707070707070707070714000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707070707070707070707070707070714000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0707070707070707070707070707070714000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
012000000277200000000000277202772027720277202772000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0110001f0000003612000000361200000036120000003612000000361200000036120000003612000000361200000036120000003612000000361200000036120000003612000000361200000036120000003612
__music__
03 00014344

